<Window xmlns="https://github.com/avaloniaui"
        xmlns:avrtb="using:AvRichTextBox"
        xmlns:vm="using:Client.MVVM.ViewModels"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        x:Class="Client.MVVM.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Title="Messenger" Icon="/Assets/Icon.png"
        Width="840" MinWidth="840" Height="460" MinHeight="460"
        WindowStartupLocation="CenterScreen">

    <Design.DataContext>
        <vm:MainWindowViewModel/>
    </Design.DataContext>
    
    <Grid Margin="0"
        ColumnDefinitions="200,*">

        <Grid Grid.Column="0" Background="Black" 
            RowDefinitions="Auto,*">

            <Grid Grid.Row="0" Margin="10" 
                RowDefinitions="Auto,*">

                <Image Grid.Row="0" Source="/Assets/Logo.png" />

                <StackPanel Grid.Row="1" IsVisible="{Binding LoginVisible}">
                    <Label Content="Screen Name" Foreground="White" Margin="0,10,0,0" />

                    <TextBox Text="{Binding LoginUsername, UpdateSourceTrigger=PropertyChanged}" />
            
                    <Label Content="Password" Foreground="White" Margin="0,10,0,0" />
                
                    <TextBox Text="{Binding LoginPassword, UpdateSourceTrigger=PropertyChanged}" />

                    <HyperlinkButton Content="Forgot Password" Margin="0,5,0,0" />

                    <Grid Margin="0,10,0,0" 
                        HorizontalAlignment="Right"
                        ColumnDefinitions="Auto,Auto">

                        <Button Grid.Column="0" Content="Register" Margin="0,0,10,0" 
                            Command="{Binding LoginRegister}" />

                        <Button Grid.Column="1" Content="Sign On" 
                            Command="{Binding LoginSignOn}" />
                    </Grid>
                
                    <TextBlock Text="{Binding LoginError}" Margin="0,10,0,0" 
                        Background="Black" Foreground="Red" 
                        TextWrapping="WrapWithOverflow" />
                </StackPanel>

                <Grid Grid.Row="1" IsVisible="{Binding !LoginVisible}" 
                    RowDefinitions="*">

                    <ListBox Grid.Row="0" ItemsSource="{Binding ChatUsers}" 
                        VerticalAlignment="Stretch" Background="White">

                        <ListBox.Styles>
                            <Style Selector="ListBoxItem">
                                <Setter Property="Background" Value="LightGray" />
                                <Setter Property="Padding" Value="0" />
                            </Style>
                        </ListBox.Styles>

                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <Button Content="{Binding Username}" 
                                        Name="User" BorderThickness="0"
                                        CornerRadius="0" Background="White" 
                                        HorizontalAlignment="Stretch" 
                                        HorizontalContentAlignment="Left" 
                                        Command="{Binding Command}" 
                                        CommandParameter="{Binding Username}"/>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                </Grid>
            </Grid>

            <StackPanel Grid.Row="1" VerticalAlignment="Bottom">
                <Button Content="Settings" Padding="16" 
                    CornerRadius="0"
                    Background="LightGray"
                    BorderThickness="0,0,0,1"
                    HorizontalAlignment="Stretch" 
                    HorizontalContentAlignment="Center" 
                    Command="{Binding Settings}" />

                <Button Content="Latest News" Padding="16" 
                    CornerRadius="0" 
                    Background="LightGray"
                    BorderThickness="0,1,0,0"
                    HorizontalAlignment="Stretch" 
                    HorizontalContentAlignment="Center" 
                    Command="{Binding News}" />
            </StackPanel>
        </Grid>

        <Grid Grid.Column="1" Margin="0" 
            ColumnDefinitions="*"
            RowDefinitions="*,100">

            <avrtb:RichTextBox Grid.Column="0" Grid.Row="0" BorderThickness="0" IsReadOnly="True" 
                FlowDocument="{Binding SettingsPage}" IsVisible="{Binding SettingsPageVisible}" />

            <avrtb:RichTextBox Grid.Column="0" Grid.Row="0" BorderThickness="0" IsReadOnly="True" 
                FlowDocument="{Binding NewsPage}" IsVisible="{Binding NewsPageVisible}" />

            <avrtb:RichTextBox Grid.Column="0" Grid.Row="0" BorderThickness="0" IsReadOnly="True" 
                FlowDocument="{Binding ChatPage}" IsVisible="{Binding ChatPageVisible}" />

            <Grid Grid.Column="0" Grid.Row="1" Margin="10" 
                VerticalAlignment="Center" IsVisible="{Binding ChatPageVisible}"
                ColumnDefinitions="*,60"
                RowDefinitions="80">
                
                <avrtb:RichTextBox Grid.Column="0" Margin="0,0,10,0" IsReadOnly="False" 
                    FlowDocument="{Binding ChatMessage, UpdateSourceTrigger=PropertyChanged}" />
                
                <Button Grid.Column="1" Content="Send" 
                    Background="LightGray" 
                    VerticalAlignment="Stretch"
                    HorizontalAlignment="Stretch"
                    VerticalContentAlignment="Center"
                    HorizontalContentAlignment="Center"
                    Command="{Binding ChatSend}" />
            </Grid>

            <Grid Grid.Column="0" Grid.Row="1" Margin="10" 
                VerticalAlignment="Center" IsVisible="{Binding !ChatPageVisible}"
                RowDefinitions="80">
                
                <Button Content="All the drama and twice the fun!" 
                    Background="LightGray" FontSize="20"
                    VerticalAlignment="Stretch"
                    HorizontalAlignment="Stretch"
                    VerticalContentAlignment="Center"
                    HorizontalContentAlignment="Center"
                    Command="{Binding Artwork}" />
            </Grid>
        </Grid>
    </Grid>
</Window>